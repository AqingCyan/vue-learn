# 列表渲染细节

## v-for 指令

当我们涉及到列表渲染数据的时候，不可能做一个重复的工作去不停的一个一个的渲染每一项列表。并且列表数据的表现，比如从后端请求过来的数据，不可能是一个一个的单独的 JSON 数据，通常会是一个数组或者对象。

针对这样的情景，Vue 提供了 `v-for` 指令使列表使我们可以根据一组数组的选项列表进行渲染。并且，我们只需要写一个列表元素作为模板就可以通过遍历属性的方式渲染出大量的列表内容。

```html
<div v-for="(item, index) of list" :key="index">
  <li>{{index}} -- {{item}}</li>
</div>
```

当然，除了列表，也可以通过`v-for`重复渲染其他元素，这里我们使用`v-for`重复渲染 div，`v-for="(item, index) of list"`是一个固定的语法，参数第一项为遍历 list 属性的每一项，参数第二项为遍历 list 时的索引。

:apple:除了`item of items`这种写法，使用`item in items`也是可以的。(items 是源数据数组并且 item 是数组元素迭代的别名)。

```js
let vm = new Vue({
  el: "#app",
  data: {
    list: ["hello", "world", "and", "aqing", "cyan"]
  }
});
```

::: tip
渲染时遍历的源数据，通常为一个对象或者数组，在遍历不同类型的数据时，`in` 与 `of` 也要区别使用。
:::

## 拓展：Vue 数组数据的修改

现在页面有 5 个数据，我们在控制台 vm.list[5] = '123'，添加一条数据，发现 vm.list 虽然多了一条数据，但页面没有响应式的变化。

::: tip
Vue 中对数组的操作有限定的 api，使用它们才能让页面有响应式的变化：pop、push、shift、unshift、splice、sort、reverse。
:::

:beer:当然，除了以上的方式，我们还可以通过直接修改数组引用的方式来促使页面重新渲染，
该方法也适用于对象，若直接通过键值对的方式增加减少修改对象，虽然对象的数据变化，页面也不会有响应式的变化，所以通过修改引用，让绑定在页面的对象指向新的对象就能使页面重新渲染。

:art:而针对以上情况，还有 set 方法可以使用，
`Vue.set` 全局方法 `vm.$set` 实例方法都可以
比如在控制台输入 `Vue.set(vm.list, 1, 'node.js')` 或者 `vm.$set(vm.list, 1, 'node.js')` 看看第二个元素的变化。
